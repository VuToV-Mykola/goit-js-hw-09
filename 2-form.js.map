{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["// Throttle для обмеження частоти збереження\nimport throttle from 'lodash.throttle';\n\n// Ключ для localStorage та посилання на форму\nconst STORAGE_KEY = 'feedback-form-state';\nconst formElement = document.querySelector('.feedback-form');\n\n// Початковий стан форми\nconst getInitialState = () => ({\n  email: '',\n  message: '',\n});\n\n// Поточний стан форми в памʼяті\nconst formState = getInitialState();\n\n// Завантаження стану з localStorage\nconst loadFormState = () => {\n  if (!formElement) {\n    return;\n  }\n\n  const savedState = localStorage.getItem(STORAGE_KEY);\n  if (!savedState) {\n    return;\n  }\n\n  try {\n    // Парсимо збережені дані та заповнюємо форму\n    const parsedState = JSON.parse(savedState);\n    const nextState = { ...getInitialState(), ...parsedState };\n    formElement.elements.email.value = nextState.email;\n    formElement.elements.message.value = nextState.message;\n    Object.assign(formState, nextState);\n  } catch (error) {\n    // Якщо дані пошкоджені — очищаємо storage та стан\n    localStorage.removeItem(STORAGE_KEY);\n    Object.assign(formState, getInitialState());\n  }\n};\n\n// Збереження стану (throttle 500ms)\nconst persistFormState = throttle(() => {\n  if (!formElement) {\n    return;\n  }\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formState));\n}, 500);\n\n// Обробник введення в інпути\nconst handleFormInput = (event) => {\n  const { name, value } = event.target;\n\n  // Ігноруємо поля, яких немає у стані\n  if (!Object.prototype.hasOwnProperty.call(formState, name)) {\n    return;\n  }\n\n  formState[name] = value;\n  persistFormState();\n};\n\n// Обробник сабміту форми\nconst handleFormSubmit = (event) => {\n  event.preventDefault();\n\n  const email = formState.email.trim();\n  const message = formState.message.trim();\n\n  // Перевірка на порожні поля\n  if (!email || !message) {\n    alert('Please fill in all fields');\n    return;\n  }\n\n  // Логуємо дані та очищаємо стан\n  console.log({ email, message });\n\n  formElement.reset();\n  localStorage.removeItem(STORAGE_KEY);\n  Object.assign(formState, getInitialState());\n};\n\n// Підключення обробників та ініціалізація\nif (formElement) {\n  loadFormState();\n  formElement.addEventListener('input', handleFormInput);\n  formElement.addEventListener('submit', handleFormSubmit);\n}\n"],"names":["STORAGE_KEY","formElement","getInitialState","formState","loadFormState","savedState","parsedState","nextState","persistFormState","throttle","handleFormInput","event","name","value","handleFormSubmit","email","message"],"mappings":"oFAIA,MAAMA,EAAc,sBACdC,EAAc,SAAS,cAAc,gBAAgB,EAGrDC,EAAkB,KAAO,CAC7B,MAAO,GACP,QAAS,EACX,GAGMC,EAAYD,EAAe,EAG3BE,EAAgB,IAAM,CAC1B,GAAI,CAACH,EACH,OAGF,MAAMI,EAAa,aAAa,QAAQL,CAAW,EACnD,GAAKK,EAIL,GAAI,CAEF,MAAMC,EAAc,KAAK,MAAMD,CAAU,EACnCE,EAAY,CAAE,GAAGL,EAAe,EAAI,GAAGI,CAAW,EACxDL,EAAY,SAAS,MAAM,MAAQM,EAAU,MAC7CN,EAAY,SAAS,QAAQ,MAAQM,EAAU,QAC/C,OAAO,OAAOJ,EAAWI,CAAS,CACpC,MAAgB,CAEd,aAAa,WAAWP,CAAW,EACnC,OAAO,OAAOG,EAAWD,GAAiB,CAC5C,CACF,EAGMM,EAAmBC,EAAS,IAAM,CACjCR,GAIL,aAAa,QAAQD,EAAa,KAAK,UAAUG,CAAS,CAAC,CAC7D,EAAG,GAAG,EAGAO,EAAmBC,GAAU,CACjC,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAK,EAAKF,EAAM,OAGzB,OAAO,UAAU,eAAe,KAAKR,EAAWS,CAAI,IAIzDT,EAAUS,CAAI,EAAIC,EAClBL,EAAgB,EAClB,EAGMM,EAAoBH,GAAU,CAClCA,EAAM,eAAc,EAEpB,MAAMI,EAAQZ,EAAU,MAAM,KAAI,EAC5Ba,EAAUb,EAAU,QAAQ,KAAI,EAGtC,GAAI,CAACY,GAAS,CAACC,EAAS,CACtB,MAAM,2BAA2B,EACjC,MACF,CAGA,QAAQ,IAAI,CAAE,MAAAD,EAAO,QAAAC,CAAO,CAAE,EAE9Bf,EAAY,MAAK,EACjB,aAAa,WAAWD,CAAW,EACnC,OAAO,OAAOG,EAAWD,GAAiB,CAC5C,EAGID,IACFG,EAAa,EACbH,EAAY,iBAAiB,QAASS,CAAe,EACrDT,EAAY,iBAAiB,SAAUa,CAAgB"}